library(shiny)
library(bslib)
library(bsicons)
library(quantmod)
Chart=quantmod::chartSeries
Symbols=quantmod::getSymbols.yahoo
ui=page_sidebar(
  title = "stockVis",
  sidebar = sidebar(
    "select a stock to examine. \n Information will be collected from Yahoo finance.",
    selectInput(
      inputId = "symbol",
      label="symbol",
      choices = list(
        "SPY","TSLA","AAPL","MSFT","AMD","AMZN"
      ),
      selected = "SPY"
    ),
   dateRangeInput(
     inputId = "range",
     label = "date range"
   ),
   checkboxInput(
     inputId = "log",
     label = "Plot y axis on log scale"
   ),
   checkboxInput(
    inputId = "adjust",
    label = "adjust prices for inflation"
   )
  ),
  card(plotOutput("plot"))
)
server=function(input,output){
  output$plot=renderPlot({
    data=Symbols(input$symbol,src="yahoo",
                 from = input$range[1],
                 to=input$range[2],
                 auto.assign=F)
    Chart(dataInput(),theme = chartTheme("white"),
          type="line",log.scale = input$log,
          TA=NULL)
  })
  # dataInput=reactive({
  #   Symbols(input$symbol,src="yahoo",
  #           from = input$range[1],
  #           to=input$range[2],
  #           auto.assign=F)
  # })
  # 
  # output$plot=renderPlot({
  #   Chart(dataInput(),theme = chartTheme("white"),
  #         type="line",log.scale = input$log,
  #         TA=NULL)
  # })
}
library(shiny)
shinyApp(ui,server)
